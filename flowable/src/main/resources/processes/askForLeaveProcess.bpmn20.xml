<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef">
  <process id="askForLeaveProcess" name="askForLeaveProcess" isExecutable="true">
    <startEvent id="startEvent" name="startEvent"/>
    <userTask id="askForLeaveTask" name="askForLeaveTask" flowable:assignee="${applier}"/>
    <sequenceFlow id="startEventToAskForLeaveTask" sourceRef="startEvent" targetRef="askForLeaveTask" name="startEventToAskForLeaveTask"/>
    <userTask id="groupLeaderTask" name="groupLeaderTask" flowable:candidateUsers="${groupLeader}"/>
    <sequenceFlow id="askForLeaveTaskToGroupLeaderTask" sourceRef="askForLeaveTask" targetRef="groupLeaderTask"/>
    <exclusiveGateway id="groupLeaderJudgeGate" name="groupLeaderJudgeGate"/>
    <sequenceFlow id="groupLeaderTaskToGroupLeaderJudgeGate" sourceRef="groupLeaderTask" targetRef="groupLeaderJudgeGate" name="groupLeaderTaskToGroupLeaderJudgeGate"/>
    <userTask id="managerTask" name="managerTask" flowable:assignee="${manager}"/>
    <sequenceFlow id="groupLeaderJudgeGateToApprove" sourceRef="groupLeaderJudgeGate" targetRef="managerTask" name="groupLeaderJudgeGateToApprove">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approved}]]></conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="managerJudgeGate" name="managerJudgeGate"/>
    <sequenceFlow id="managerTaskToJudgeGate" sourceRef="managerTask" targetRef="managerJudgeGate" name="managerTaskToJudgeGate"/>
    <serviceTask id="sendAskFailedMail" name="sendAskFailedMail"  flowable:class="com.example.flowabledemo.activity.SendAskFailedMail"/>
    <sequenceFlow id="groupLeaderJudgeGateToFailedWay" sourceRef="groupLeaderJudgeGate" targetRef="sendAskFailedMail" name="groupLeaderJudgeGateToFailedWay">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!approved}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="managerJudgeGateToFailedWay" sourceRef="managerJudgeGate" targetRef="sendAskFailedMail" name="managerJudgeGateToFailedWay">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!approved}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="managerJudgeGateToApprovedEnd" sourceRef="managerJudgeGate" targetRef="sid-d03ea671-8013-455d-9c36-5444b4e6e70d" name="managerJudgeGateToApprovedEnd">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approved}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="sid-d03ea671-8013-455d-9c36-5444b4e6e70d" flowable:class="com.example.flowabledemo.activity.SendAskFailedMail"/>
    <endEvent id="askFailedEnd" name="askFailedEnd"/>
    <sequenceFlow id="sendAskFailedMailToEnd" sourceRef="sendAskFailedMail" targetRef="askFailedEnd"/>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_askForLeaveProcess">
    <bpmndi:BPMNPlane bpmnElement="askForLeaveProcess" id="BPMNPlane_askForLeaveProcess">
      <bpmndi:BPMNShape id="shape-00c364b7-189f-45e9-8f0f-96bfc42720b1" bpmnElement="startEvent">
        <omgdc:Bounds x="-1025.0" y="-145.0" width="30.0" height="30.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape-3883372d-14d2-4749-9eb5-3e7693830dc5" bpmnElement="askForLeaveTask">
        <omgdc:Bounds x="-955.0" y="-170.0" width="100.0" height="80.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-7a3eea9b-ffb7-4160-8e0c-002dd99782f9" bpmnElement="startEventToAskForLeaveTask">
        <omgdi:waypoint x="-995.0" y="-130.0"/>
        <omgdi:waypoint x="-955.0" y="-130.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-88e69f3e-efbc-4a3d-8a3d-83f047688c48" bpmnElement="groupLeaderTask">
        <omgdc:Bounds x="-785.0" y="-170.0" width="100.0" height="80.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-198d1baf-d0bf-4931-9f2e-a253ed137c21" bpmnElement="askForLeaveTaskToGroupLeaderTask">
        <omgdi:waypoint x="-855.0" y="-130.0"/>
        <omgdi:waypoint x="-785.0" y="-130.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-c802c08b-367c-4a8f-ad1c-ebdf18f75be1" bpmnElement="groupLeaderJudgeGate">
        <omgdc:Bounds x="-625.0" y="-150.0" width="40.0" height="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-32811604-69d3-4b39-a343-7944c9833cfb" bpmnElement="groupLeaderTaskToGroupLeaderJudgeGate">
        <omgdi:waypoint x="-685.0" y="-130.0"/>
        <omgdi:waypoint x="-625.0" y="-130.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-c60eeec6-06c5-450f-9f2f-c8f251c6baa3" bpmnElement="managerTask">
        <omgdc:Bounds x="-500.0" y="-170.0" width="100.0" height="80.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-6dd8c0b5-e9f7-4b8e-97db-69447ab190ed" bpmnElement="groupLeaderJudgeGateToApprove">
        <omgdi:waypoint x="-585.0" y="-130.0"/>
        <omgdi:waypoint x="-500.0" y="-130.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-689fbd40-d667-42bd-b9c0-00291add793f" bpmnElement="managerJudgeGate">
        <omgdc:Bounds x="-320.0" y="-150.0" width="40.0" height="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-4e36ab3b-19ed-4170-aa76-e1f4cd9ada8b" bpmnElement="managerTaskToJudgeGate">
        <omgdi:waypoint x="-400.0" y="-130.0"/>
        <omgdi:waypoint x="-320.0" y="-130.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-e73434b9-000e-4c4b-8577-de03a7964ce0" bpmnElement="sendAskFailedMail">
        <omgdc:Bounds x="-655.0" y="-25.0" width="100.0" height="80.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-209c3f69-5a31-4aec-8423-30f269fe5d09" bpmnElement="groupLeaderJudgeGateToFailedWay">
        <omgdi:waypoint x="-605.0" y="-110.0"/>
        <omgdi:waypoint x="-605.0" y="-25.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-eb973481-1fd8-4a36-bf33-3070fe31ecdb" bpmnElement="managerJudgeGateToFailedWay">
        <omgdi:waypoint x="-300.0" y="-110.0"/>
        <omgdi:waypoint x="-300.0" y="15.0"/>
        <omgdi:waypoint x="-555.0" y="14.999998"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-f42698ae-b6a3-44ab-9e6f-f8c0e5f43915" bpmnElement="sid-d03ea671-8013-455d-9c36-5444b4e6e70d">
        <omgdc:Bounds x="-200.0" y="-145.0" width="30.0" height="30.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-81f048f5-3490-4107-8076-aef26f4d1ff7" bpmnElement="managerJudgeGateToApprovedEnd">
        <omgdi:waypoint x="-280.0" y="-130.0"/>
        <omgdi:waypoint x="-200.0" y="-130.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-e401978d-f2ba-4dfa-ae30-c1473bf88999" bpmnElement="askFailedEnd">
        <omgdc:Bounds x="-770.0" y="0.0" width="30.0" height="30.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-0d2e524a-ce2b-4fe9-be34-61eaaaf05f51" bpmnElement="sendAskFailedMailToEnd">
        <omgdi:waypoint x="-655.0" y="15.0"/>
        <omgdi:waypoint x="-740.0" y="15.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
